(function(){var a=[].slice;!function(){var a,b;return $.datepicker.setDefaults({dateFormat:"yy-mm-dd"}),jQuery.mobile.loader.prototype.fakeFixLoader=function(){},b={},a=function(){var a,c,d,e;d={text:"",textVisible:!0,textonly:!1},a=!1;for(c in b)e=b[c],null!=e.text&&(0!==d.text.length&&(d.text+=", "),d.text+=e.text),e.blocking===!0&&(a=!0);return 0!==d.text.length?d.text+="...":d.textVisible=!1,a?$("body").addClass("ui-loading-blocking"):($("body").removeClass("ui-loading-blocking"),d.textVisible=!0,d.textonly=!0,0===d.text.length&&(d.text=__("Loading")+"...")),d},pimatic.loading=function(c,d,e){setTimeout(function(){var f;switch(d){case"show":return b[c]=e,$.mobile.loading("show",a());case"hide":return delete b[c],0===function(){var a;a=[];for(f in b)a.push(f);return a}().length?($.mobile.loading("hide"),$("body").removeClass("ui-loading-blocking")):$.mobile.loading("show",a())}},1)},pimatic.loading.pendingLoadings=b,$(document).on("pagechange",function(){setTimeout(function(){var c,d;return 0!==function(){var a;a=[];for(c in b)a.push(c);return a}().length?(d=a(),$.mobile.loading("show",d)):void 0},1)}),$(document).on("vclick",".ui-loader",function(){return function(){return window.location.reload()}}(this)),"none"!==overthrow.support?$.mobile.Transition.prototype.scrollPage=function(){return function(){}}(this):void 0}(),$.ajaxSetup({timeout:2e4}),$(document).ajaxStart(function(){return pimatic.loading("ajax","show",{text:"loading",blocking:!0})}),$(document).ajaxStop(function(){return pimatic.loading("ajax","hide")}),$(document).ajaxError(function(){}),$(document).ready(function(){return function(){return window.applicationCache?window.applicationCache.addEventListener("updateready",function(){return window.applicationCache.status!==window.applicationCache.UPDATEREADY||pimatic.themeChanged||(window.applicationCache.swapCache(),swal({title:"Reload?",text:"A new version of the frontend is available. Load it?",type:"info",showCancelButton:!0,cancelButtonText:"Not right now...",confirmButtonText:"Reload!",closeOnConfirm:!1},function(){return swal("Reloading!","Reloading app, please wait.","success"),window.location.reload()})),pimatic.themeChanged=!1},!1):void 0}}(this),!1),pimatic["try"]=function(a){var b;try{return a.apply(this,arguments)}catch(c){b=c}},pimatic.tryCatch=function(a){return function(){var b;try{return a.apply(this,arguments)}catch(c){return b=c,TraceKit.report(b)}}},window.ajaxShowToast=function(a){return pimatic.showToast(null!=a.message?a.message:"done")},window.ajaxAlertFail=function(a,b,c){var d,e,f;d=null;try{d=$.parseJSON(a.responseText)}catch(g){e=g}return f=null!=(null!=d?d.message:void 0)?d.message:f=null!=c&&""!==c?c:"error"===b?__("No connection"):b,swal("Oops...",__(f),"error"),!0},pimatic.timestampToDateTime=function(a){var b,c,d;return d=function(){return function(a){return 10>a?"0"+a:""+a}}(this),b=new Date(a),c=b.getFullYear()+"-"+d(b.getMonth()+1)+"-"+d(b.getDate()),a=d(b.getHours())+":"+d(b.getMinutes())+":"+d(b.getSeconds()),{date:c,time:a}},$(document).ready(function(){return function(){var a;a=ko.observableArray([]),ko.applyBindings({toastMessages:a},$("#toasts")[0]),pimatic.showToast=function(b){var c;c={message:b},a.push(c),setTimeout(function(){return function(){return a.remove(c)}}(this),4500)}}}(this)),pimatic.isValidId=function(){return function(a){return null!=a.match(/^[a-z0-9_-]+$/)}}(this),pimatic.isValidVariableName=function(){return function(a){return null!=a.match(/^[a-zA-Z0-9_-]+$/)}}(this),pimatic.invalidIdMessage='The entered ID is not valid. Please use only lowercase alphanumeric characters, "_" and "-".',pimatic.invalidVariableNameMessage='The entered variable name is not valid. Please use only alphanumeric characters, "_" and "-".',pimatic.makeIdFromName=function(){return function(a){var b,c,d,e;for(a=a.replace(/^\s+|\s+$/g,""),a=a.toLowerCase(),b="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",e="aaaaeeeeiiiioooouuuunc------",c=0,d=b.length;d>c;)a=a.replace(new RegExp(b.charAt(c),"g"),e.charAt(c)),c++;return a=a.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}}(this),pimatic.autoFillId=function(){return function(a,b,c){var d;d="",a.subscribe(function(a){var e,f;return"add"!==c()?void(d=""):(e=b(),f=pimatic.makeIdFromName(a),(e===d||0===e.length)&&b(f),d=f)})}}(this),window.__=function(){var b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],e=d,null!=locale[d]&&(e=locale[d]),f=0,g=c.length;g>f;f++)b=c[f],e=e.replace(/%s/,b);return e},null==window.console&&(window.console={log:function(){}}),TraceKit.report.subscribe(function(){return function(a){var b,c,d,e,f,g,h,i,j;for(i=a.stack,e=0,g=i.length;g>e;e++)if(c=i[e],null!=c.context)for(j=c.context,d=f=0,h=j.length;h>f;d=++f)b=j[d],b.length>200&&(c.context[d]=b.substring(0,200)+"...");return $.ajax({url:"/client-error",type:"POST",global:!1,data:{error:a}})}}(this)),pimatic.changeTheme=function(a){return $("#theme-link").attr("href","/theme/"+a+".css?save=1"),$("#select-theme").val(a),pimatic.themeChanged=!0,pimatic.storage.set("pimatic.theme",a)},function(){var a,b,c,d,e;return d=$("#theme-link"),d.remove(),c=pimatic.storage.get("pimatic.theme"),null!=c?d.attr("href","/theme/"+c+".css?save=1"):(a=d.attr("data-default-theme"),d.attr("href","/theme/"+a+".css?save=1")),pimatic.themeChanged=!0,b=d.prop("outerHTML"),document.write(b),$(document).on("change","#select-theme",function(){return pimatic.changeTheme($(this).val())}),e=function(){var a,b;return a=$("#index .ui-header").css("background-color"),b=$("#theme-color"),null!=a&&a!==b.attr("content")?b.attr("content",a):void 0},e(),setInterval(e,500)}(),pimatic.fixedAddElement=function(a,b,c,d){var e,f;return e=function(){return a()?c.css({width:d.width()}):void 0},$(window).resize(e),f=b(),b.subscribe(function(a){return f=a,d.css(f?{height:d.height()+c.outerHeight(),"padding-bottom":0}:{"padding-bottom":c.outerHeight()})}),ko.computed(function(){var b;return b=a(),b&&!f?(c.css({position:"fixed",left:0,bottom:0,height:c.height(),width:d.width(),"z-index":3}),d.css({"padding-bottom":c.outerHeight()}),c.addClass("fixed-add-element")):(c.css({position:"relative",height:"auto",width:"auto"}),d.css({"padding-bottom":0}),c.removeClass("fixed-add-element"))}).extend({rateLimit:{timeout:200,method:"notifyWhenChangesStop"}})}}).call(this);